<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lynx Apartment Host Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
        background: #f9f9f9;
      }
      h1 {
        text-align: center;
      }
      .tabs {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 20px;
        border-bottom: 2px solid #eee;
        gap: 0;
      }
      .tab-btn {
        background: none;
        border: none;
        outline: none;
        padding: 12px 24px;
        font-size: 16px;
        cursor: pointer;
        border-bottom: 3px solid #ccc;
        transition: border 0.2s, color 0.2s;
        white-space: nowrap;
        flex: 1 1 auto;
        text-align: center;
        min-width: 120px;
        max-width: 100vw;
      }
      .tab-btn.active {
        border-bottom: 3px solid #0078d7;
        color: #0078d7;
        font-weight: bold;
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      .section {
        margin-bottom: 30px;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
      }
      .checkbox-group {
        margin-left: 20px;
      }
      .checkbox-group label {
        font-weight: normal;
        display: block;
        margin-bottom: 5px;
      }
      button {
        padding: 10px 20px;
        margin-top: 20px;
      }
      .add-btn {
        margin-top: 10px;
        font-size: 12px;
      }
      img.logo {
        display: block;
        margin: auto;
        width: 100px;
      }
      @media screen and (max-width: 600px) {
        .tabs {
          flex-direction: row;
          flex-wrap: wrap;
        }
        .tab-btn {
          font-size: 15px;
          padding: 10px 8px;
          min-width: 100px;
        }
        .checkbox-group label {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 5px 0;
        }
        .checkbox-group input[type="checkbox"] {
          margin-right: 10px;
        }
      }
      body.dark-mode {
        background: #23272a;
        color: #f3f3f3;
      }
      body.dark-mode h1,
      body.dark-mode label {
        color: #f3f3f3;
      }
      body.dark-mode .container {
        background: #23272a;
      }
      body.dark-mode .tab-btn {
        border-bottom: 3px solid #444;
      }
      body.dark-mode .tab-btn.active {
        color: #ffe066;
        border-bottom: 3px solid #ffe066;
      }
      body.dark-mode .tab-content {
        background: transparent;
      }
      body.dark-mode button,
      body.dark-mode .add-btn {
        background: #23272a;
        color: #ffe066;
        border: 1px solid #ffe066;
      }
      body.dark-mode input[type="text"] {
        background: #23272a;
        color: #f3f3f3;
        border: 1px solid #444;
      }
      body.dark-mode .checkbox-group label {
        color: #f3f3f3;
      }
      body.dark-mode #shopping-list li {
        color: #f3f3f3;
      }
      body.dark-mode select {
        background: #23272a;
        color: #f3f3f3;
        border: 1px solid #444;
      }
      body.dark-mode .tab-btn {
        border: none; /* —Å–ø—Ä–µ—á—É–≤–∞ –Ω–µ—Å–∞–∫–∞–µ–Ω –æ–∫–≤–∏—Ä */
        border-bottom: 3px solid #444; /* —Å–∞–º–æ –¥–æ–ª–Ω–∏–æ—Ç —Ä–∞–± –∞–∫–æ —Å–∞–∫–∞—Ç–µ */
        background: transparent;
      }
      /* --- Responsive Top Bar for Date & Theme Toggle --- */
      .top-bar {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 20px;
        padding: 0 16px;
        position: relative;
      }
      .top-bar label {
        margin: 0;
        font-weight: 600;
        font-size: 1rem;
        white-space: nowrap;
        margin-right: 8px;
      }
      .top-bar select {
        width: fit-content;
        font-size: 1rem;
        padding: 6px 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
        background: #fff;
        color: #23272a;
        margin: 0 8px;
      }
      #theme-toggle {
        position: absolute;
        top: 16px;
        right: 16px;
        font-size: 1.5rem;
        background: none;
        border: none;
        cursor: pointer;
        border-radius: 4px;
        padding: 4px 8px;
      }
      .top-bar button#theme-toggle {
        font-size: 1.6em;
        background: none;
        border: none;
        cursor: pointer;
        border-radius: 50%;
        padding: 6px 10px;
        transition: background 0.2s;
        margin: 0;
      }
      .top-bar button#theme-toggle:active,
      .top-bar button#theme-toggle:focus {
        background: #eee;
        outline: none;
      }

      @media (max-width: 600px) {
        .top-bar {
          flex-direction: column;
          align-items: stretch;
          gap: 8px;
          padding: 12px;
        }
        .top-bar label,
        .top-bar select,
        .top-bar button#theme-toggle {
          font-size: 1.08em;
          width: 100%;
          margin: 0;
          text-align: center;
        }

        .top-bar button#theme-toggle {
          align-self: flex-end;
          width: auto;
        }
      }
      body.dark-mode .top-bar select {
        width: fit-content;
        background: #23272a;
        color: #f3f3f3;
        border: 1px solid #444;
      }
      body.dark-mode .top-bar button#theme-toggle:active,
      body.dark-mode .top-bar button#theme-toggle:focus {
        background: #333;
      }
      #theme-toggle {
        position: absolute;
        top: 16px;
        right: 16px;
        font-size: 1.5rem;
        background: #f0f0f0;
        color: #222;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 6px 10px;
        cursor: pointer;
        z-index: 1000;
      }
      body.dark-mode #theme-toggle {
        background: #23272a;
        color: #ffe066;
        border-color: #23272a;
      }
      #theme-toggle:hover {
        background: #dtransparentdd;
      }
      .date-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
      }
      .date-wrapper select {
        width: fit-content;
        padding: 6px 10px;
        font-size: 1rem;
        margin-bottom: 16px;
        border-color: #cbd2d7;
      }

      .date-row select {
        width: fit-content;
        min-width: auto;
        padding: 6px 10px;
        font-size: 1rem;
      }
      body.dark-mode .date-wrapper select {
        background: #23272a;
        color: #f3f3f3;
        border: 1px solid #444;
        width: fit-content;
        margin-bottom: 16px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <button id="theme-toggle" aria-label="Toggle dark mode">üåô</button>

      <div class="date-wrapper">
        <label for="date">–î–∞—Ç—É–º –Ω–∞ –∏–Ω—Å–ø–µ–∫—Ü–∏—ò–∞:</label>
        <select id="date"></select>
      </div>

      <img src="logo-lynx.png" alt="Lynx Logo" class="logo" id="lynx-logo" />
      <h1>Lynx Apartment Dashboard</h1>
      <nav class="tabs" role="tablist">
        <button
          class="tab-btn active"
          id="tab-checklist"
          role="tab"
          aria-selected="true"
          aria-controls="content-checklist"
          tabindex="0"
        >
          üßπ Cleaning List
        </button>
        <button
          class="tab-btn"
          id="tab-consumables"
          role="tab"
          aria-selected="false"
          aria-controls="content-consumables"
          tabindex="-1"
        >
          üì¶ Consumables List
        </button>
        <button
          class="tab-btn"
          id="tab-inventory"
          role="tab"
          aria-selected="false"
          aria-controls="content-inventory"
          tabindex="-1"
        >
          üìã Inventory List
        </button>
        <button
          class="tab-btn"
          id="tab-shopping"
          role="tab"
          aria-selected="false"
          aria-controls="content-shopping"
          tabindex="-1"
        >
          üõí Shopping List
        </button>
      </nav>
      <!-- Cleaning List Section -->
      <div
        id="content-checklist"
        class="tab-content active"
        role="tabpanel"
        aria-labelledby="tab-checklist"
      >
        <div id="checklist-sections"><!-- Cleaning checklist items rendered here --></div>
        <div class="section">
          <label>Additional Notes</label>
          <input type="text" id="notes" placeholder="Any extra details..." />
        </div>
      </div>
      <!-- Consumables List Section -->
      <div
        id="content-consumables"
        class="tab-content"
        role="tabpanel"
        aria-labelledby="tab-consumables"
      >
        <div id="consumables-sections"><!-- Consumables items rendered here --></div>
      </div>
      <!-- Inventory List Section -->
      <div
        id="content-inventory"
        class="tab-content"
        role="tabpanel"
        aria-labelledby="tab-inventory"
      >
        <div id="inventory-sections"><!-- Inventory items rendered here --></div>
      </div>
      <!-- Shopping List Section -->
      <div id="content-shopping" class="tab-content" role="tabpanel" aria-labelledby="tab-shopping">
        <div class="section">
          <label>Shopping List</label>
          <ul
            id="shopping-list"
            class="checkbox-group"
            style="list-style: none; padding-left: 0"
          ></ul>
          <button class="add-btn" onclick="addShoppingItem()">+ Add item</button>
        </div>
      </div>
      <!-- Global Save Checklist Button -->
      <div style="text-align: center; margin: 32px 0 0 0">
        <button id="save-checklist-global" onclick="saveChecklist()">Save Checklist</button>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="DejaVuSans-normal.js"></script>
    <script>
      // --- Tab Switching & Theme Logic ---
      const tabBtns = document.querySelectorAll(".tab-btn");
      const tabContents = document.querySelectorAll(".tab-content");
      tabBtns.forEach((btn, idx) => {
        btn.addEventListener("click", function () {
          tabBtns.forEach(b => b.classList.remove("active"));
          tabContents.forEach(c => c.classList.remove("active"));
          btn.classList.add("active");
          tabContents[idx].classList.add("active");
          btn.setAttribute("aria-selected", "true");
          btn.setAttribute("tabindex", "0");
          tabBtns.forEach((b, i) => {
            if (i !== idx) {
              b.setAttribute("aria-selected", "false");
              b.setAttribute("tabindex", "-1");
            }
          });
        });
      });
      // --- Dark Mode Logic ---
      const themeToggle = document.getElementById("theme-toggle");
      const logoImg = document.getElementById("lynx-logo");
      function setTheme(dark) {
        if (dark) {
          document.body.classList.add("dark-mode");
          themeToggle.textContent = "‚òÄÔ∏è";
          logoImg.src = "logo-lynx-dark.png";
          localStorage.setItem("lynx-theme", "dark");
        } else {
          document.body.classList.remove("dark-mode");
          themeToggle.textContent = "üåô";
          logoImg.src = "logo-lynx.png";
          localStorage.setItem("lynx-theme", "light");
        }
      }
      themeToggle.onclick = function () {
        setTheme(!document.body.classList.contains("dark-mode"));
      };
      (function () {
        const saved = localStorage.getItem("lynx-theme");
        setTheme(saved === "dark");
      })();

      // --- Cleaning List Logic ---
      const CleaningSections = {
        –û–ø—à—Ç–æ: [
          "–û—Ç–≤–æ—Ä–∏ –≤—Ä–∞—Ç–∞ - –ø—Ä–æ–≤–µ—Ç—Ä–∏",
          "–°–æ–±–µ—Ä–∏ –∫–æ—Ä–∏—Å—Ç–µ–Ω—É –ø–æ—Å—Ç–µ—ô–∏–Ω—É –∏ –∫—Ä–ø–µ (–∫—É—ò–Ω–∞ –∏ WC)",
          "–°–æ–±–µ—Ä–∏ —ì—É–±—Ä–µ (–∫—É—ò–Ω–∞ –∏ WC)",
          "–ò—Å—Ç—Ä–µ—Å–∏ –ø—Ä–µ–∫—Ä–∏–≤–∞—á–∏/–∫–µ–±–∏—ö–∞/—ò–∞—Å—Ç—É—Ü–∏ (–¥–Ω–µ–≤–Ω–∞/—Å–ø–∞–ª–Ω–∞)",
          "–£—Å–∏—Å–∞—ò —Ç–µ–ø–∏—Å–∏, –ø–æ–¥–æ–≤–∏—Ç–µ, –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞, —Å—Ç–æ–ª–∏—Ü–µ",
          "–ò–∑–±—Ä–∏—à–∏ –ø—Ä–∞—à–∏–Ω—É –æ–¥ —Å–≤–∏ –ø–æ–≤—Ä—à–∏–Ω–µ",
          "–ò–∑—ü–æ–≥–∏—Ä–∞—ò –ø–æ–¥",
          "–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ –∑–∞–±—Ä–∞–≤–µ–Ω–∏ –ª–∏—á–Ω–∏ —Ä–∞–±–æ—Ç–µ/—Ö—Ä–∞–Ω–∞",
          "–ò—Å—á–∏—Å—Ç–∏ –ø—Ä–µ–∫–∏–¥–∞—á–∏ –∑–∞ —Å–≤–µ—Ç–ª–∞ –∏ —Ä—É—á–∫–µ –Ω–∞ –≤—Ä–∞—Ç–∞",
          "–û—Ç–≤–æ—Ä–∏ –°–í–ò —Ñ–∏–æ–∫–µ –∏ –≤–∏—Å–∞—ú–∏ –≤—Ä–∞—Ç–∞ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫—É",
        ],
        –°–ø–∞–ª–Ω–∞: [
          "–ò–∑–±—Ä–∏—à–∏ –ø—Ä–∞—à–∏–Ω—É –æ–¥ –Ω–æ—ú–Ω–∏ –æ—Ä–º–∞—Ä–∏/–ª–∞–º–ø–µ/–¢–í",
          "–£–ø–∞–ª–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏ –¢–í –∏ –¥–∞–ª–µ—á–∏–Ω—Å–∫–∏",
          "–ò–∑–±—Ä–∏—à–∏ –ø—Ä–∞—à–∏–Ω–∞ –£ –≥–∞—Ä–¥–µ—Ä–æ–±–µ—Ä",
          "–ü—Ä–æ–≤–µ—Ä–∏ –∫—Ä–µ–≤–µ—Ç –∏ –¥—É—à–µ–∫",
          "–ü—Ä–æ–≤–µ—Ä–∏ —Ä–µ–∑–µ—Ä–≤–Ω–∞ –ø–æ—Å—Ç–µ–ª–Ω–∏–Ω–∞ –ø–æ–¥ –∫—Ä–µ–≤–µ—Ç",
        ],
        –î–Ω–µ–≤–Ω–∞: [
          "–ò–∑–±—Ä–∏—à–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏ –¢–í, –¥–∞–ª–µ—á–∏–Ω—Å–∫–∏ –∏ –∫–æ–º–æ–¥—É",
          "–ò–∑–±—Ä–∏—à–∏ –ø—Ä–∞—à–∏–Ω—É –∏ —Å—Ç–∞–∫–ª–∞ –æ–¥ –º–∏–Ω–∏–±–∞—Ä",
          "–ò–∑–±—Ä–∏—à–∏ –ø—Ä–∞—à–∏–Ω–∞ –æ–¥ –õ—É—Å—Ç–µ—Ä/–°—Ç–æ–ª–Ω–∞ –õ–∞–º–ø–∞",
          "–ü—Ä–æ–≤–µ—Ä–∏ sofa bed",
          "–ü—Ä–æ–≤–µ—Ä–∏ –∫–Ω–∏–≥–∏ –∑–∞ –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞ (3)",
          "–ù–∞–≤–æ–¥–Ω–∏ —Ü–≤–µ—õ–µ",
          "–ü—Ä–æ–≤–µ—Ä–∏ WiFi –±—Ä–∑–∏–Ω–∞",
        ],
        –ö—É—ò–Ω–∞: [
          "–ò–∑–±—Ä–∏—à–∏ —à–ø–æ—Ä–µ—Ç –∏ —Ä–µ—Ä–Ω—É",
          "–ò–∑–±—Ä–∏—à–∏ —Ñ—Ä–∏–∂–∏–¥–µ—Ä –∏ –∑–∞–º—Ä–∑–Ω—É–≤–∞—á",
          "–ò–∑–±—Ä–∏—à–∏ –º–∏–∫—Ä–æ–±—Ä–∞–Ω–æ–≤–∞ –ø–µ—á–∫–∞",
          "–ü—Ä–æ–≤–µ—Ä–∏ –º–∞—à–∏–Ω–∞ –∑–∞ —Å–∞–¥–æ–≤–∏",
          "–ò–∑–±—Ä–∏—à–∏ –µ–ª–µ–∫—Ç—Ä–∏—á–µ–Ω –±–æ–∫–∞–ª",
          "–ò–∑–±—Ä–∏—à–∏ –º–∞—à–∏–Ω–∞ –∑–∞ –∫–∞—Ñ–µ",
          "–ò—Å–ø—Ä–∞–∑–Ω–∏ –º–∞—à–∏–Ω—É –∑–∞ –∫–∞—Ñ–µ –æ–¥ –∏—Å–∫–æ—Ä–∏—Å—Ç–µ–Ω–∏ –∫–∞–ø—Å—É–ª–µ",
          "–ò—Å–ø—Ä–∞–∑–Ω–∏ —Ñ—Ä–∏–∂–∏–¥–µ—Ä –∏ –∑–∞–º—Ä–∑–Ω—É–≤–∞—á",
          "–ò—Å–ø—Ä–∞–∑–Ω–∏ —Ç–æ—Å—Ç–µ—Ä –æ–¥ —Ç—Ä–æ—à–∫–µ",
          "–ü—Ä–æ–≤–µ—Ä–∏ —Ç–µ–Ω—ü–µ—Ä–∏—ö–∞ –∏ —Ç–∞–≤–∏",
          "–ò–∑–±—Ä–∏—à–∏ –ø—Ä–∏–±–æ—Ä –∑–∞ —ò–∞–¥–µ—ö–µ",
          "–ò–∑–±—Ä–∏—à–∏ —Å—Ç–∞–∫–ª–µ–Ω–∫–∏ —á–∞—à–∏",
          "–ò–∑–±—Ä–∏—à–∏ –¥–∞—Å–∫–∏ –∑–∞ —Å–µ—á–µ—ö–µ",
          "–î–æ–ø—É–Ω–∏ –ß–∞—ò/–ö–∞—Ñ–µ/–ë–æ–º–±–æ–Ω–µ/–í–æ–¥–∞",
          "–î–æ–ø—É–Ω–∏ –∫–µ—Å–µ –∑–∞ —ì—É–±—Ä–µ",
        ],
        –ö—É–ø–∞—Ç–∏–ª–æ: [
          "–ò—Å—á–∏—Å—Ç–∏ –æ–≥–ª–µ–¥–∞–ª–æ –∏ –ª–∞–≤–∞–±–æ",
          "–ò—Å—á–∏—Å—Ç–∏ —Ç—É—à –∫–∞–±–∏–Ω—É –∏ —Ç—É—à —Ä—É—á–∫—É",
          "–ò—Å—á–∏—Å—Ç–∏ –í–¶ —à–æ—ô—É –∏ –ß–µ—Ç–∫—É –∑–∞ –í–¶ —à–æ—ô—É",
          "–ò–∑—ü–æ–≥–∏—Ä–∞—ò –ø–æ–¥ –∏ –ø–ª–æ—á–∫–∏",
          "–î–æ–ø—É–Ω–∏ —Ç–æ–∞–ª–µ—Ç–Ω–∞ —Ö–∞—Ä—Ç–∏—ò–∞",
          "–î–æ–ø—É–Ω–∏ —Å–∞–ø—É–Ω–Ω",
          "–î–æ–ø—É–Ω–∏ —Å—Ä–µ–¥—Å—Ç–≤–æ –∑–∞ –ø—Ä–∞—ö–µ –∞—ô–∏—à—Ç–∞",
          "–î–æ–ø—É–Ω–∏ —Å—Ä–µ–¥—Å—Ç–≤–æ –∑–∞ –¥–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏—ò–∞",
          "–ó–∞–º–µ–Ω–∏ –æ—Å–≤–µ–∂–∏–≤–∞—á –∑–∞ –í–¶ —à–æ—ô—É",
          "–°—Ç–∞–≤–∏ –Ω–æ–≤–∏ –∫—Ä–ø–µ (–±–∞—ö–∞—ö–µ, –ª–∏—Ü–µ, –Ω–æ–≥–µ) (2 –ø–æ –≥–æ—Å—Ç–∞)",
          "–ü—Ä–æ–≤–µ—Ä–∏ —Ñ–µ–Ω, –º–∞—à–∏–Ω–∞ –∑–∞ –ø—Ä–∞—ö–µ, –±–æ—ò–ª–µ—Ä, —Å—É—à–∞—Ä–∞",
        ],
        –¢—Ä–ø–µ–∑–∞—Ä–∏—ò–∞: [
          "–ü—Ä–µ–±—Ä–∏—à–∏ —Ç—Ä–ø–µ–∑–∞—Ä–∏—Å–∫–∏ –∞—Å—Ç–∞–ª",
          "–ò—Å—Ç—Ä–µ—Å–∏ —Å—Ç–æ–ª–∏—Ü–µ –æ–¥ —Ç—Ä–æ—à–∫–µ",
          "–ù–∞–º–µ—Å—Ç–∏ –ø–æ–¥–ª–æ–≥–µ –∑–∞ –≤—Ä—É—ú–æ",
          "–°—Ç–∞–≤–∏ –≤–∞–∑–Ω—É –Ω–∞ —Å—Ä–µ–¥ —Å—Ç–∞–ª",
        ],
        –¢–µ—Ä–∞—Å–∞: ["–ò—Å–ø–µ—Ä–∏ —Ç–µ—Ä–∞—Å—É", "–ü—Ä–µ–±—Ä–∏—à–∏ –∞—Å—Ç–∞–ª—á–µ –∏ —Å—Ç–æ–ª–∏—Ü–µ"],
      };
      function createSection(title, items) {
        const sectionId = title.replace(/\s+/g, "_");
        const section = document.createElement("div");
        section.className = "section";
        section.innerHTML = `<label>${title}</label>
          <div class="checkbox-group" id="${sectionId}"></div>
          <button class="add-btn" onclick="addItem('${sectionId}', '${title}')">+ Add item</button>`;
        document.getElementById("checklist-sections").appendChild(section);
        renderSectionItems(sectionId, title);
      }
      function renderSectionItems(sectionId, title) {
        const group = document.getElementById(sectionId);
        group.innerHTML = "";
        CleaningSections[title].forEach((item, idx) => {
          const label = document.createElement("label");
          label.style.display = "flex";
          label.style.alignItems = "center";
          label.style.justifyContent = "space-between";
          label.innerHTML = `
            <span>
              <input type="checkbox"> ${item}
            </span>
            <span>
              <!-- Developer-only: Edit/Delete buttons can go here -->
            </span>
          `;
          group.appendChild(label);
        });
      }
      function addItem(sectionId, title) {
        const item = prompt("Enter new item:");
        if (item) {
          CleaningSections[title].push(item);
          renderSectionItems(sectionId, title);
        }
      }
      function populateDateDropdown() {
        const select = document.getElementById("date");
        const today = new Date();
        for (let i = 0; i < 7; i++) {
          const d = new Date(today);
          d.setDate(today.getDate() + i);
          const yyyy = d.getFullYear();
          const mm = String(d.getMonth() + 1).padStart(2, "0");
          const dd = String(d.getDate()).padStart(2, "0");
          const dateStr = `${yyyy}-${mm}-${dd}`;
          const option = document.createElement("option");
          option.value = dateStr;
          option.text = dateStr;
          if (i === 0) option.selected = true;
          select.appendChild(option);
        }
      }
      function saveChecklist() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        // Register and set DejaVu font for Cyrillic support
        try {
          doc.addFileToVFS("DejaVuSans.ttf", dejavu_sans_normal);
          doc.addFont("DejaVuSans.ttf", "DejaVu", "normal");
          doc.setFont("DejaVu");
        } catch (e) {
          console.error("Font loading error:", e);
          doc.setFont("Tahoma");
        }
        doc.setFontSize(16);
        let y = 10;
        // --- Cleaning List ---
        doc.text("Cleaning List", 10, y);
        y += 10;
        doc.setFontSize(12);
        for (const [section, items] of Object.entries(CleaningSections)) {
          doc.text(section, 10, y);
          y += 8;
          var sectionId = section.replace(/\s+/g, "_");
          var group = document.getElementById(sectionId);
          if (group) {
            var checkboxes = group.querySelectorAll("input[type='checkbox']");
            items.forEach(function (item, idx) {
              var checked = checkboxes[idx] && checkboxes[idx].checked;
              var text = "[" + (checked ? "x" : " ") + "] " + item;
              doc.text(text, 14, y);
              y += 7;
              if (y > 280) {
                doc.addPage();
                y = 10;
              }
            });
          }
          y += 4;
        }
        // Notes
        var notes = document.getElementById("notes").value;
        doc.text("Notes:", 10, y);
        y += 7;
        doc.text(notes, 10, y);
        // --- Page break before next section ---
        doc.addPage();
        y = 10;
        // --- Consumables List ---
        doc.setFontSize(16);
        doc.text("Consumables List", 10, y);
        y += 10;
        doc.setFontSize(12);
        for (const [section, items] of Object.entries(consumablesSections)) {
          doc.text(section, 10, y);
          y += 8;
          var sectionIdC = "consumables_" + section.replace(/\s+/g, "_");
          var groupC = document.getElementById(sectionIdC);
          if (groupC) {
            var checkboxesC = groupC.querySelectorAll("input[type='checkbox']");
            items.forEach(function (item, idx) {
              var checked = checkboxesC[idx] && checkboxesC[idx].checked;
              var text = "[" + (checked ? "x" : " ") + "] " + item;
              doc.text(text, 14, y);
              y += 7;
              if (y > 280) {
                doc.addPage();
                y = 10;
              }
            });
          }
          y += 4;
        }
        // --- Page break before next section ---
        doc.addPage();
        y = 10;
        // --- Inventory List ---
        doc.setFontSize(16);
        doc.text("Inventory List", 10, y);
        y += 10;
        doc.setFontSize(12);
        for (const [section, items] of Object.entries(inventorySections)) {
          doc.text(section, 10, y);
          y += 8;
          var sectionIdI = section.replace(/\s+/g, "_") + "_inventory";
          var groupI = document.getElementById(sectionIdI);
          if (groupI) {
            var checkboxesI = groupI.querySelectorAll("input[type='checkbox']");
            items.forEach(function (item, idx) {
              var checked = checkboxesI[idx] && checkboxesI[idx].checked;
              var text = "[" + (checked ? "x" : " ") + "] " + item;
              doc.text(text, 14, y);
              y += 7;
              if (y > 280) {
                doc.addPage();
                y = 10;
              }
            });
          }
          y += 4;
        }
        // --- Page break before next section ---
        doc.addPage();
        y = 10;
        // --- Shopping List ---
        doc.setFontSize(16);
        doc.text("Shopping List", 10, y);
        y += 10;
        doc.setFontSize(12);
        var shoppingUl = document.getElementById("shopping-list");
        if (shoppingUl) {
          var lis = shoppingUl.querySelectorAll("li");
          lis.forEach(function (li) {
            var cb = li.querySelector("input[type='checkbox']");
            var checked = cb && cb.checked;
            var text = "[" + (checked ? "x" : " ") + "] " + li.innerText.trim();
            doc.text(text, 14, y);
            y += 7;
            if (y > 280) {
              doc.addPage();
              y = 10;
            }
          });
        }
        // --- Save PDF ---
        var date = document.getElementById("date").value;
        doc.save("Lynx_Checklist_" + date.replace(/[:\s]/g, "_") + ".pdf");
      }

      // --- Consumables List Logic ---
      const consumablesSections = {
        –ö—É—ò–Ω–∞: [
          "–°—ò–∞—ò –∑–∞ —Å—É–¥–æ–≤–∏, —Å—É–Ω–≥–µ—Ä—á–∏—ö–∞",
          "–°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞ —á–∏—Å—Ç–µ—ö–µ (–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–æ, –î–µ –ì—Ä–∞—Å, –ü–ª–æ—Ç–Ω–∞)",
          "–¢–∞–±–ª–µ—Ç–∏ –∑–∞ –º–∞—à–∏–Ω–∞ –∑–∞ –º–∏–µ—ö–µ —Å–∞–¥–æ–≤–∏",
          "–ö–µ—Å–µ –∑–∞ —ì—É–±—Ä–µ",
          "–ë—Ä–∏—Å–∞—á–∏ (—Ä–æ–ª–Ω–∞ —Ö–∞—Ä—Ç–∏—ò–∞)",
          "–ö—Ä–ø–∏ –∑–∞ –ø—Ä–∞—à–∏–Ω–∞ (–í–∏–ª–µ–¥–∞ –∏ –ø–∞–º—É—á–Ω–∏)",
          "–°–æ–ª, —à–µ—ú–µ—Ä, –º–∞—Å–ª–æ, –æ—Ü–∞—Ç, –∑–∞—á–∏–Ω–∏",
          "–ö–∞—Ñ–µ/–ß–∞—ò/–ë–æ–º–±–æ–Ω–µ/–í–æ–¥–∞",
          "–†—É–∫–∞–≤–∏—Ü–µ –∑–∞ —á–∏—Å—Ç–µ—ö–µ",
        ],
        –ö—É–ø–∞—Ç–∏–ª–æ: [
          "–¢–æ–∞–ª–µ—Ç–Ω–∞ —Ö–∞—Ä—Ç–∏—ò–∞",
          "–°–∞–ø—É–Ω –∑–∞ —Ä—É–∫–µ",
          "–ß–µ—Ç–∫–∏—Ü–∞ –∏ –ø–∞—Å—Ç–∞ –∑–∞ –∑—É–±–∏ (–µ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∏)",
          "–ü–∞–º—É—á–Ω–∏ —Ç—É—Ñ–µ—Ä–∏",
          "–ü–∞–º—É—á–Ω–∏ —Å—Ç–∞–ø—á–∏—ö–∞",
          "–û—Å–≤–µ–∂—É–≤–∞—á–∏ –∑–∞ –≤–æ–∑–¥—É—Ö",
          "–°—Ä–µ–¥—Å—Ç–≤–æ –∑–∞ –¥–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏—ò–∞",
          "–°—Ä–µ–¥—Å—Ç–≤–æ –∑–∞ –í–¶ —à–æ—ô–∞ (–æ—Å–≤–µ–∂–∏–≤–∞—á)",
          "–°—Ä–µ–¥—Å—Ç–≤–æ –∑–∞ –ø—Ä–∞—ö–µ –∞–ª–∏—à—Ç–∞",
          "–°—Ä–µ–¥—Å—Ç–≤–æ –ø—Ä–æ—Ç–∏–≤ –∫–∞–º–µ–Ω–∞—Ü",
        ],
        –î–Ω–µ–≤–Ω–∞: ["–ë–∞—Ç–µ—Ä–∏–µ –∑–∞ –¥–∞—ô–∏–Ω—Å–∫–æ", "–°–∏—ò–∞–ª–∏—Ü–µ –∑–∞ –õ—É—Å—Ç–µ—Ä", "–°–∏—ò–∞–ª–∏—Ü–∞ –∑–∞ –°—Ç–æ–ª–Ω–∞ –ª–∞–º–ø–∞"],
        –ú–∏–Ω–∏–±–∞—Ä: [
          "5 –í–∏–Ω–∞ (700ml —Å–µ–∫–æ–µ)",
          "5 –ñ–µ—Å—Ç–æ–∫–∏ –ø–∏—ò–∞–ª–æ—Ü–∏ (50ml —Å–µ–∫–æ–µ)",
          "5 –ì—Ä–∏—Ü–∫–∏ (—á–∏–ø—Å, —ò–∞—Ç–∫–∞—Å—Ç–∏ –ø–ª–æ–¥–æ–≤–∏ –∏—Ç–Ω.)",
          "2 –ß–æ–∫–æ–ª–∞–¥–∞ (50g —Å–µ–∫–æ–µ)",
        ],
        –•–æ–¥–Ω–∏–∫: ["–ë–æ—ò–∞ –∑–∞ —Ü–∏–ø–µ–ª–µ (2)", "–†–æ–ª–µ—Ä –∑–∞ —á–∏—Å—Ç–µ—ö–µ –≤–ª–∞–∫–Ω–∞ (1)"],
      };
      let consumablesCheckedSections = {};
      for (const section in consumablesSections) {
        consumablesCheckedSections[section] = Array(consumablesSections[section].length).fill(
          false
        );
      }
      function createConsumablesSection(title, items) {
        const sectionId = `consumables_${title.replace(/\s+/g, "_")}`;
        const section = document.createElement("div");
        section.className = "section";
        section.innerHTML = `<label>${title}</label>
          <div class="checkbox-group" id="${sectionId}"></div>
          <button class="add-btn" onclick="addConsumableItemSection('${sectionId}', '${title}')">+ Add item</button>`;
        document.getElementById("consumables-sections").appendChild(section);
        renderConsumablesSectionItems(sectionId, title);
      }
      function renderConsumablesSectionItems(sectionId, title) {
        const group = document.getElementById(sectionId);
        group.innerHTML = "";
        consumablesSections[title].forEach((item, idx) => {
          const label = document.createElement("label");
          label.style.display = "flex";
          label.style.alignItems = "center";
          label.style.justifyContent = "space-between";
          label.innerHTML = `<span><input type="checkbox" ${
            consumablesCheckedSections[title][idx] ? "checked" : ""
          } onchange="toggleConsumableSection('${title}', ${idx})"> ${item}</span>`;
          group.appendChild(label);
        });
      }
      window.addConsumableItemSection = function (sectionId, title) {
        const item = prompt("Enter new consumable item:");
        if (item && item.trim() !== "") {
          consumablesSections[title].push(item.trim());
          consumablesCheckedSections[title].push(false);
          renderConsumablesSectionItems(sectionId, title);
        }
      };
      window.toggleConsumableSection = function (title, idx) {
        consumablesCheckedSections[title][idx] = !consumablesCheckedSections[title][idx];
      };

      // --- Inventory List Logic ---
      const inventorySections = {
        "–î–Ω–µ–≤–Ω–∞ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–°—Ç–æ–ª–Ω–∞ –ª–∞–º–ø–∞ (1) (IKEA: 30405042)",
          "–ü–µ—Ä–Ω–∏—Ü–∏, –±–µ–ª–∏/—Ç–≤—Ä–¥–∏, 50x50 —Å–º (2)(IKEA: 50550702)",
          "–ü–æ–∫—Ä–∏–≤–∫–∞ –Ω–∞ –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞ (2)",
          "–£–º–µ—Ç–Ω–∏—á–∫–∞ —Å–ª–∏–∫–∞ –Ω–∞ —ï–∏–¥ (1)",
          "–ü–æ–¥–ª–æ–≥–∞ –∑–∞ –º–∞—Å–∞, –≤–æ–¥–µ–Ω –∑—É–º–±—É–ª, 37 —Å–º (1) (IKEA: 40082536)",
          "Computer Mouse (1)",
          "HDMI –∫–∞–±–µ–ª (1)",
          "US to EU –∞–¥–∞–ø—Ç–µ—Ä (2)",
          "–ü—Ä–æ–¥—É–∂–∞–Ω –∫–∞–±–∞–ª (1)",
          "–ö–Ω–∏–≥–∏ –∑–∞ –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞ (3)",
          "–£–∫—Ä–∞—Å–∏ –Ω–∞ —Å—Ç–∞–ª–∞–∂–∞ –¥–µ—Å–Ω–æ",
          "–°–≤–µ—ú–∏ –Ω–∞ –±–∞—Ç–µ—Ä–∏—ò–∞ (2)",
          "–ö–æ—à–Ω–∏—Ü–∞ –∑–∞ —Ü–≤–µ—ú–µ, –º–æ—Ä—Å–∫–∞ —Ç—Ä–µ–≤–∞, 25—Å–º (1) (IKEA: 60322173)",
        ],
        "–ú–∏–Ω–∏–±–∞—Ä –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–ü–æ–¥–º–µ—Ç–∞—á–∏ –æ–¥ –ø–ª—É—Ç–∞ (10)",
          "–ß–∞—à–∞ –∑–∞ –≤–∏–Ω–æ, –ø—Ä–æ—ï–∏—Ä–Ω–∞ —á–∞—à–∞, 60 cl (6) (IKEA: 00530523)",
          "–ß–∞—à–∏ –∑–∞ –≤–∏—Å–∫–∏ (6)",
          "–ß–∞—à–∏ –∑–∞ —à—Ç–æ–∫ (2)",
          "–ß–∞—à–∏ –∑–∞ —Ä–∞–∫–∏—ò–∞ - —à–æ—Ç (4)",
          "–ß–∞—à–∏ –∑–∞ —Ä–∞–∫–∏—ò–∞ - –¥—Ä–≤–µ–Ω —Å—Ç–∞–ª–∞–∫ (6)",
          "–ö—Ä–∏–≥–ª–∏ –∑–∞ –ø–∏–≤–æ (5)",
          "–ó–∞—Ç–≤–æ—Ä–∞—á –∑–∞ —à–∏—à–µ, 3 –ø–∞—Ä—á–∏—ö–∞, —Ä–∞–∑–Ω–æ–±–æ–µ–Ω (IKEA: 70573316)",
          "–í–∞–¥–∏—á–µ–ø (IKEA: 10149029)",
        ],
        "–°–ø–∞–ª–Ω–∞ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–û—Ñ–∏–Ω–≥–µ—Ä (8) (IKEA: 30238543)",
          "–í–æ–¥–æ–æ—Ç–ø–æ—Ä–µ–Ω –∑–∞—à—Ç–∏—Ç–Ω–∏–∫ –∑–∞ –¥—É—à–µ–∫, 160x200 —Å–º (2) (IKEA: 60522129)",
          "–ù–∞–≤–ª–∞–∫–∞ –∑–∞ —ò–æ—Ä–≥–∞–Ω –∏ 2 –Ω–∞–≤–ª–∞–∫–∏ –∑–∞ –ø–µ—Ä–Ω–∏—Ü–∏, —Å–∏–≤–∞/–ø—Ä—É–≥–∞—Å—Ç–∞, 200x200/50x60—Å–º (2) (IKEA: 70423242)",
          "–ù–∞–≤–ª–∞–∫–∞ –∑–∞ —ò–æ—Ä–≥–∞–Ω –∏ 2 –Ω–∞–≤–ª–∞–∫–∏ –∑–∞ –ø–µ—Ä–Ω–∏—Ü–∏, –±–µ–ª–∞, 200x200/50x60 —Å–º (1) (IKEA: 20377959)",
          "–ß–∞—Ä—à–∞—Ñ, –±–µ–ª–∞, 160x200 —Å–º (3) (IKEA: 30357220)",
          "–à–æ—Ä–≥–∞–Ω –∑–∞ —Å–∏—Ç–µ —Å–µ–∑–æ–Ω–∏, 200x200 —Å–º (1+1) (IKEA: 70458585)",
          "–ù–∞–≤–ª–∞–∫–∞ –∑–∞ –ø–µ—Ä–Ω–∏—Ü–∞, —Å–≤–µ—Ç–ª–æ —Å–∏–≤–∞, 50x60 —Å–º (1) (IKEA: 90482476)",
          "–ù–∞–≤–ª–∞–∫–∞ –∑–∞ –ø–µ—Ä–Ω–∏—Ü–∞, –±–µ–ª–∞, 50x60 —Å–º (3) (IKEA: 10357301)",
          "–ü–µ—Ä–Ω–∏—Ü–∞, –≤–∏—Å–æ–∫–∞, 50x60 —Å–º (2) (IKEA: 20460411)",
          "–ü–µ—Ä–Ω–∏—Ü–∞, –Ω–∏—Å–∫–∞, –Ω–∞ —Å—Ç–æ–º–∞–∫, 50x60 —Å–º (2) (IKEA: 50460546)",
          "–°—Ç–æ–ª–Ω–∞ –ª–∞–º–±–∞, –ø–µ–ø–µ–ª/–±–µ–ª–∞ (2) (IKEA: 60573538)",
          "–ú–∞–ª–µ—á–∫–∞ –ª–∞–º–±–∞ –∑–∞ —á–∏—Ç–∞—ö–µ (1)",
          "–î–∞—Å–∫–∞ –∑–∞ –ø–µ–≥–ª–∞—ö–µ",
          "–ü–µ–≥–ª–∞",
          "–ü—Ä–µ–∫—Ä–∏–≤–∞—á/–∫–µ–±–µ, —Ç–µ–º–Ω–æ —Å–∏–≤–∞, 230x250—Å–º (1) (IKEA: 60346447)",
          "–ö–µ–±–µ —Ç–µ–Ω–∫–æ (1)",
          "–ö–µ–±–µ –¥–µ–±–µ–ª–æ (1)",
          "–ö—Ä–µ–≤–µ—Ç –∑–∞ –¥–µ—Ü–∞ (–É–æ—Ä–µ)",
          "–ù–∞–≤–ª–∞–∫–∞ –∑–∞ —Å–∞–∫–æ (1)",
        ],
        "–ö—É—ò–Ω–∞ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–ù–æ–∂, 3 –∫–æ–º (IKEA: 70257624)",
          "–ù–æ–∂, —Ü—Ä–Ω 22 —Ü–º (4)(IKEA: 00287295)",
          "–î–∞—Å–∫–∞ –∑–∞ —Å–µ—á–µ—ö–µ, –±–∞–º–±—É—Å, 45x28 —Å–º (IKEA: 80233430)",
          "–û—Å—Ç—Ä–∏–ª–∫–∞ –∑–∞ –Ω–æ–∂–µ–≤–∏, —Ü—Ä–Ω–∞ (IKEA: 57145296)",
          "–õ—É–ø–∞–ª–∫–∞ –∑–∞ –∫–æ–º–ø–∏—Ä–∏, –∑–µ–ª–µ–Ω–∞ (IKEA: 90521963)",
          "–ó–¥–µ–ª–∞ –∑–∞ —Å–∞–ª–∞—Ç–∞, –ø—Ä–æ—ï–∏—Ä–Ω–æ —Å—Ç–∞–∫–ª–æ, 20 —Å–º (IKEA: 90057252)",
          "–ü—Ä–∏–±–æ—Ä –∑–∞ —ò–∞–¥–µ—ö–µ, 30 –ø–∞—Ä—á–∏—ö–∞, –æ–¥ –Ω–µ'—Ä—ì–æ—Å—É–≤–∞—á–∫–∏ —á–µ–ª–∏–∫ (IKEA: 30167507)",
          "–¢–µ–Ω—ü–µ—Ä–µ –∑–∞ –≥–æ—Ç–≤–µ—ö–µ —Å–æ –∫–∞–ø–∞–∫ (3), —Ç–∏–≥–∞—ö (1)(IKEA: 80580104)",
          "–ü–æ–¥–º–µ—Ç–∞—á –∑–∞ —Ç–µ–Ω—ü–µ—Ä–µ, –ø–ª—É—Ç–∞, 19 —Å–º (IKEA: 87077700)",
          "–î—Ä–∂–∞—á –∑–∞ –≤—Ä—É—ú–æ —Ç–µ–Ω—ü–µ—Ä–µ, —Å–∏–≤, 21x21 —Å–º (IKEA: 00476366)",
          "–°–∞–¥ –∑–∞ —Å–æ–ª/–±–∏–±–µ—Ä, –ø—Ä–æ—ï–∏—Ä–Ω–æ —Å—Ç–∞–∫–ª–æ 8—Å–º ( IKEA: 40553211)",
          "–ö—É—ò–Ω—Å–∫–∏ –∫—Ä–ø–∏, –±–µ–ª/–∑–µ–ª–µ–Ω/—Å–æ —à–∞—Ä–∏, 45x60 —Å–º (4)(IKEA: 60476354)",
          "–ö—É—ò–Ω—Å–∫–∏ –∫—Ä–ø–∏, –±–µ–ª/—Ç–µ–º–Ω–æ —Å–∏–≤/—Å–æ —à–∞—Ä–∏, 45x60 —Å–º (8)(IKEA: 20476346)",
          "–ü–æ–ª–∏—Ü–∞ —Ü–µ–¥–µ—ö–µ –∑–∞ —Å–∞–¥–æ–≤–∏ (1)(IKEA: 80461276)",
          "–ñ–∏—Ü–∞ –∑–∞ –º–∞—Ç–µ—ö–µ, —Ç—Ä–∫–∞–ª–µ–∑–Ω–∞ (1)(IKEA: 10225952)",
          "–û—Ä–≥–∞–Ω–∏–∑–µ—Ä –∑–∞ –ø—Ä–∏–±–æ—Ä –∑–∞ —ò–∞–¥–µ—ö–µ, —Å–≤–µ—Ç–ª–∞ –±–∞–º–±—É—Å–æ–≤–∞, 52x50 —Å–º (IKEA: 70433104)",
          "–†–µ–Ω–¥–µ",
          "–¢–æ—Å—Ç–µ—Ä, —Ü—Ä–Ω",
          "–ë–æ–∫–∞–ª –∑–∞ –≤–æ–¥—É –Ω–∞ —Å—Ç—Ä—É—ò–∞",
          "–ö–∞—Ñ–µ–º–∞—Ç KRUPS KP 243B10, 1000W, 15 bar",
          "–ó–¥–µ–ª–∞ –∑–∞ –∫–∞–ø—Å—É–ª–µ –∑–∞ –∫–∞—Ñ–µ (Temu)",
        ],
        "–¢—Ä–ø–µ–∑–∞—Ä–∏—ò–∞ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–ü–æ–¥–ª–æ–≥–∞ –∑–∞ –º–∞—Å–∞, —Ç–µ–º–Ω–æ —Å–∏–≤–∞, 38x30—Å–º (4) (IKEA: 20569251)",
          "–í–∞–∑–Ω–∞, –ø—Ä–æ—ï–∏—Ä–Ω–æ —Å—Ç–∞–∫–ª–æ –≤–æ –±–æ—ò–∞",
          "–¢—Ä–ø–µ–∑–∞—Ä–∏—Å–∫–∞ –º–∞—Å–∞ —Å–æ 4 —Å—Ç–æ–ª–∏—Ü–∏",
        ],
        "–ö—É–ø–∞—Ç–∏–ª–æ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–°–∞–∫—Å–∏—ò–∞ –∑–∞ —Ü–≤–µ—ú–µ (IKEA: 40395617)",
          "–ö–∞–Ω—Ç–∞ –∑–∞ –æ—Ç–ø–∞–¥ (IKEA: 20593736)",
          "–ß–µ—Ç–∫–∞ –∑–∞ —Ç–æ–∞–ª–µ—Ç (IKEA: 10593727)",
          "–î—Ä–∂–∞—á –∑–∞ —Ç–æ–∞–ª–µ—Ç–Ω–∞ —Ö–∞—Ä—Ç–∏—ò–∞ (IKEA: 40381291)",
          "–ö—Ä–ø–∞ –∑–∞ –±–∞—ö–∞—ö–µ, (6), 70x140 —Å–º (IKEA: 80350985)",
          "–ö—Ä–ø–∞ –∑–∞ —Ä—É–∫–µ, (6), 50x100 —Å–º (IKEA: 70350995)",
          "–¢—É—à —Ä—É—á–∫–∞ (IKEA: 60342543)",
          "–¢–µ–ø–∏—Ö –∑–∞ –±–∞—ö—É, —Ç–∏—Ä–∫–∏–∑–Ω–∞, 50x80 —Å–º (IKEA: 40603169)",
          "–î–æ–∑–∞—Ç–æ—Ä –∑–∞ —Å–∞–ø—É–Ω (IKEA: 30593726)",
          "–î—Ä–∂–∞—á –∑–∞ —á–µ—Ç–∫–∏—Ü–µ –∑–∞ –∑—É–±–∏ (IKEA: 50593730)",
          "–°–∞–º–æ–ª–µ–ø–ª–∏–≤–∞ –∫—É–∫–∞ (2) (IKEA: 50567830)",
          "–ù–∞–¥–≤–æ—Ä–µ—à–Ω–∏ –ø–æ–ª–∏—Ü–∏ –∑–∞ –∫—Ä–ø–µ, –±–∞–º–±—É—Å, 37x37x104—Å–º (1)(IKEA: 80549420)",
          "–ö—É—Ç–∏—ò–∞ –∑–∞ –ø—Ä–≤–∞ –ø–æ–º–æ—à Praxis ‚Äì JUS 5015",
          "–ö–æ—Ä–ø–∞ –∑–∞ —Ñ–µ–Ω (STOREAGE)",
          "–§–µ–Ω –∑–∞ –∫–æ—Å—É (MAX HD22IR)",
          "–¢–æ—Ä–±–∞ –∑–∞ —Ñ–µ–Ω (Temu)",
          "–ü–ª–∞—Å—Ç–∏—á–Ω–∞ –∫–æ—Ä–ø–∞ –∑–∞ –≤–µ—à (Temu)",
          "–ì—É–º–µ–Ω–∏ –ø–∞–ø—É—á–µ (Temu)",
        ],
        "–•–æ–¥–Ω–∏–∫ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–ü–æ–¥–ª–æ–≥–∞ –∑–∞ —Ü–∏–ø–µ–ª–µ 71x35 —Å–º(IKEA: 60329711)",
          "–£—Å–∏—Å—É–≤–∞—á (MAKS VC 2200SW)",
          "–ö–∞—à–∏–∫–∞ –∑–∞ —Ü–∏–ø–µ–ª–µ",
        ],
        "–¢–µ—Ä–∞—Å–∞ –ò–Ω–≤–µ–Ω—Ç—É—Ä–∞": [
          "–°—Ç–æ–ª–∏—Ü–∞ –∑–∞ —Å–µ–¥–µ—ö–µ (2)(IKEA: 90095428)",
          "–ê—Å—Ç–∞–ª—á–µ –∑–∞ —Ç–µ—Ä–∞—Å—É (1)(IKEA: 70095429)",
        ],
      };
      function createInventorySection(title, items) {
        const sectionId = title.replace(/\s+/g, "_");
        const section = document.createElement("div");
        section.className = "section";
        section.innerHTML = `<label>${title}</label>
          <div class="checkbox-group" id="${sectionId}_inventory"></div>
          <button class="add-btn" onclick="addInventoryItem('${sectionId}', '${title}')">+ Add item</button>`;
        document.getElementById("inventory-sections").appendChild(section);
        renderInventorySectionItems(sectionId, title);
      }
      function renderInventorySectionItems(sectionId, title) {
        const group = document.getElementById(sectionId + "_inventory");
        group.innerHTML = "";
        inventorySections[title].forEach((item, idx) => {
          const label = document.createElement("label");
          label.style.display = "flex";
          label.style.alignItems = "center";
          label.style.justifyContent = "space-between";
          label.innerHTML = `<span><input type="checkbox"> ${item}</span>`;
          group.appendChild(label);
        });
      }
      window.addInventoryItem = function (sectionId, title) {
        const item = prompt("Enter new item:");
        if (item) {
          inventorySections[title].push(item);
          renderInventorySectionItems(sectionId, title);
        }
      };

      // --- Shopping List Logic ---
      let shoppingList = [];
      let dragSrcIndex = null;
      function renderShoppingList() {
        const ul = document.getElementById("shopping-list");
        ul.innerHTML = "";
        shoppingList.forEach((item, idx) => {
          const li = document.createElement("li");
          li.setAttribute("draggable", "true");
          li.setAttribute("data-index", idx);
          li.style.display = "flex";
          li.style.alignItems = "center";
          li.style.justifyContent = "space-between";
          li.style.padding = "4px 0";
          li.ondragstart = e => {
            dragSrcIndex = idx;
            e.dataTransfer.effectAllowed = "move";
            li.style.opacity = "0.5";
          };
          li.ondragend = () => {
            li.style.opacity = "";
          };
          li.ondragover = e => {
            e.preventDefault();
            li.style.background = "#e6f7ff";
          };
          li.ondragleave = () => {
            li.style.background = "";
          };
          li.ondrop = e => {
            e.preventDefault();
            li.style.background = "";
            if (dragSrcIndex !== null && dragSrcIndex !== idx) {
              const moved = shoppingList.splice(dragSrcIndex, 1)[0];
              shoppingList.splice(idx, 0, moved);
              renderShoppingList();
            }
            dragSrcIndex = null;
          };
          li.innerHTML = `<span><input type="checkbox"> ${item}</span>`;
          ul.appendChild(li);
        });
      }
      function addShoppingItem() {
        const item = prompt("Enter shopping item:");
        if (item && item.trim() !== "") {
          shoppingList.push(item.trim());
          renderShoppingList();
        }
      }

      // --- Initial Render on Load ---
      window.onload = function () {
        populateDateDropdown();
        // Cleaning List
        for (const [section, items] of Object.entries(CleaningSections)) {
          createSection(section, items);
        }
        // Consumables List
        for (const [section, items] of Object.entries(consumablesSections)) {
          createConsumablesSection(section, items);
        }
        // Inventory List
        for (const [section, items] of Object.entries(inventorySections)) {
          createInventorySection(section, items);
        }
        // Shopping List
        renderShoppingList();
      };
    </script>
  </body>
</html>
